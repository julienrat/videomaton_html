:root{
  --bg:#0d1117;
  --panel:#161b22;
  --text:#e6edf3;
  --muted:#8b949e;
  --primary:#2f81f7;
  --danger:#f85149;
  --success:#3fb950;
  --border:#30363d;
  --accent:#e3b341;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.app{display:flex;flex-direction:column;min-height:100vh}
.top-bar{
  display:flex;align-items:center;gap:12px;
  padding:12px 16px;border-bottom:1px solid var(--border);background:var(--panel);
}
.top-bar{display:none}
.top-bar h1{font-size:18px;margin:0}
.spacer{flex:1}

.layout{display:grid;grid-template-columns:320px 1fr;gap:16px;padding:16px;min-height:0;flex:1}
.layout.no-controls{grid-template-columns:1fr}
.controls{
  background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:12px;overflow:auto
}
.is-hidden{display:none !important}
.control-group{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.small{font-size:12px}
.muted{color:var(--muted)}

label{font-size:13px;color:var(--muted)}
input,select,button{font:inherit}
input,select{
  padding:8px;border:1px solid var(--border);border-radius:6px;background:#0b0f14;color:var(--text)
}
input[type="color"]{padding:0;min-height:36px}

.btn{padding:8px 12px;border:1px solid var(--border);border-radius:6px;background:#0b0f14;color:var(--text);cursor:pointer}
.btn:hover{background:#0f141a}
.btn.primary{background:var(--primary);border-color:#1f6feb}
.btn.primary:disabled{opacity:.6;cursor:not-allowed}
.btn.danger{background:var(--danger);border-color:#da3633}
.btn.secondary{background:#21262d}
.btn.small{padding:6px 8px;font-size:12px}

.stage{position:relative;display:flex;flex-direction:column;gap:12px;min-height:0}
.layout.no-controls .stage{align-items:center;justify-content:center;gap:16px}
.question{font-size:18px;text-align:center;padding:8px}
.layout.no-controls .question{font-size:clamp(28px,4vw,64px);font-weight:800;line-height:1.1;padding:0 8px}
.video-wrapper{position:relative;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#000;min-height:320px}
.layout.no-controls .video-wrapper{width:min(90vw,1200px);aspect-ratio:16/9;min-height:unset}
.rec-indicator{position:absolute;top:12px;left:12px;display:flex;align-items:center;gap:8px;background:rgba(0,0,0,.35);padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.15);backdrop-filter:saturate(140%) blur(6px);font-weight:700;letter-spacing:.08em;opacity:0;transition:opacity .15s ease;color:#fff}
.rec-indicator .dot{width:10px;height:10px;border-radius:50%;background:var(--danger);box-shadow:0 0 12px rgba(248,81,73,.9)}
.rec-indicator .label{font-size:12px}
.video-wrapper.recording .rec-indicator{opacity:1}
video#preview{display:block;width:100%;height:100%;object-fit:cover}
.recording-border{pointer-events:none;position:absolute;inset:0;border-radius:12px;box-shadow:0 0 0 0 var(--danger);transition:box-shadow .12s ease}
.video-wrapper.recording .recording-border{box-shadow:0 0 0 16px var(--danger);animation:recPulse 1.1s infinite}
@keyframes recPulse{0%{box-shadow:0 0 0 16px var(--danger)}50%{box-shadow:0 0 0 28px rgba(248,81,73,.65)}100%{box-shadow:0 0 0 16px var(--danger)}}
.countdown{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:96px;font-weight:700;color:white;text-shadow:0 4px 24px rgba(0,0,0,.7);opacity:0;transition:opacity .12s ease}
.countdown.show{opacity:1}

.meters{display:flex;align-items:center;gap:8px}
.layout.no-controls .meters{width:min(90vw,1200px)}
.meter{position:relative;flex:1;height:10px;background:#0b0f14;border:1px solid var(--border);border-radius:999px;overflow:hidden}
.meter-fill{height:100%;width:0;background:linear-gradient(90deg,var(--success),var(--accent),var(--danger));transition:width .05s linear}
.meter.mini{height:8px}
.threshold-marker{position:absolute;top:0;bottom:0;width:2px;background:var(--accent);opacity:.9}

.status{padding:8px;border:1px solid var(--border);border-radius:6px;background:#0b0f14}

.dialog{border:none;padding:0;background:transparent}
.dialog::backdrop{background:rgba(0,0,0,.6)}
.dialog-content{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:16px;min-width:320px}
.dialog-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}

@media (max-width: 900px){
  .layout{grid-template-columns:1fr}
}

